<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover"
  />
  <meta name="theme-color" content="#24346c" />
  <title>VPO Awaiting Field Tech</title>
  <link rel="icon" href="favicon3.ico" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="app-header">
    <h1>Open VPOs</h1>
  </header>

  <!-- Filters (sticky on mobile) -->
  <section class="filters" role="region" aria-label="Filters">
    <div class="filters-row">
      <div class="search-wrap">
        <label class="sr-only" for="searchBar">Search jobs</label>
        <input
          type="text"
          id="searchBar"
          class="search-bar"
          placeholder="Search jobs…"
          aria-label="Search jobs"
          inputmode="search"
          autocomplete="off"
        />
        <button id="clearSearch" class="btn btn-ghost" aria-label="Clear search" title="Clear search" hidden>✕</button>
      </div>

      <div class="select-wrap">
        <label for="techDropdown">Technician</label>
        <select id="techDropdown" aria-label="Filter by Technician">
          <option value="all">Display All</option>
        </select>
      </div>

      <div class="select-wrap">
        <label for="branchDropdown">Branch</label>
        <select id="branchDropdown" aria-label="Filter by Branch">
          <option value="all">All Branches</option>
        </select>
      </div>

      <button id="resetFilters" class="btn" title="Reset filters" aria-label="Reset filters">Reset</button>
    </div>

    <div class="filters-meta">
      <p id="displayName" class="display-name" aria-live="polite"></p>
      <span id="recordCount" class="count-pill" role="status" aria-live="polite"></span>
    </div>
  </section>

  <!-- Table -->
  <main class="table-container" role="main">
    <div class="table-wrapper" tabindex="0">
      <table id="records" role="table" aria-label="Open VPO records"></table>
    </div>
  </main>

  <!-- Loading overlay -->
  <div id="loadingOverlay" class="loading-overlay" aria-hidden="true" aria-label="Loading">
    <div class="loading-spinner" role="status" aria-live="polite"></div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- Modal -->
  <div class="modal-overlay" id="modalOverlay" aria-hidden="true"></div>
  <div
    id="modal"
    class="modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="modalTitle"
    aria-describedby="modalDesc"
  >
    <p id="modalTitle" class="modal-title">Confirm completion</p>
    <p id="modalDesc" class="modal-desc">Are you sure you want to confirm the job is complete?</p>
    <div class="modal-actions">
      <button id="yesButton" class="btn btn-affirm">Yes</button>
      <button id="noButton" class="btn btn-cancel">No</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="FieldTechVPO.js"></script>
</body>
</html>
